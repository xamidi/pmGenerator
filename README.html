<!-- Generated from README.md with https://xamidi.github.io/md-to-html/, but
     with CSS style from https://github.com/KrauseFx/markdown-to-html-github-style (and additional modifications).
     Update instructions:
     1. Manually replace <body>[...]</body> with that of the updated version
     2. RegEx replace-all: [FIND]class\=\"markdown-content\"[/FIND], [REPLACE]id\=\"readme\"[/REPLACE] (1 occurence)
     3. RegEx replace-all: [FIND] class\=\" *\b(?!\bmarkdown-container ltr\b)[^\"]*\b *\"[/FIND], [REPLACE][/REPLACE] (289 occurences)
     4. RegEx replace-all: [FIND]<p><img src\=\"icon\/icon-readme\.png\" align\=\"left\"><\/p>[/FIND], [REPLACE]<img src\=\"icon\/icon-readme\.png\" align\=\"left\">[/REPLACE] (1 occurence)
     5. RegEx replace-all: [FIND]id\=\"-xamidi-pmgenerator\"[/FIND], [REPLACE]id\=\"xamidi-pmgenerator\"[/REPLACE] (1 occurence)
     6. RegEx replace-all: [FIND]<(/|)span>[/FIND], [REPLACE][/REPLACE] (570 occurences)
     7. [FIND]≈\  [/FIND], [REPLACE]≈  [/REPLACE] (24 occurences)
     8. [FIND]  \  [/FIND], [REPLACE]    [/REPLACE] (15+4 occurences)
     (NOTE: Use RegEx replacements to not invalidate these instructions. Further content may require more bugfixes as by steps 4 to 8.)
     -->
<html>
<head>
<meta charset="UTF-8">
<title>README</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/**
 * Gained from https://github.com/KrauseFx/markdown-to-html-github-style/blob/master/style.css (partly modified)
 */
body {
    font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
    font-size: 16px;
    line-height: 1.5;
    word-wrap: break-word;
    box-sizing: border-box;
  color: #111;
  background-color: #fff;
  /*-webkit-text-size-adjust: 100%;
  -webkit-font-feature-settings: "kern" 1;
  -moz-font-feature-settings: "kern" 1;
  -o-font-feature-settings: "kern" 1;
  font-feature-settings: "kern" 1;
  font-kerning: normal;*/
  padding: 30px;
}
body > #content {
  margin: 0px;
  max-width: 900px;
  border: 1px solid #e1e4e8;
  padding: 10px 40px;
  padding-bottom: 20px;
  border-radius: 2px;
  margin-left: auto;
  margin-right: auto;
}
hr {
  color: #bbb;
  background-color: #bbb;
  height: 1px;
  flex: 0 1 auto;
  margin: 1em 0;
  padding: 0;
  border: none;
}
a {
  color: #0366d6;
  text-decoration: none; }
  a:visited {
    color: #0366d6; }
  a:hover {
    color: #0366d6;
    text-decoration: underline; }
pre {
  background-color: #f6f8fa;
  border-radius: 3px;
  line-height: 1.45;
  overflow: auto;
  padding: 16px;
}
code {
  background-color: rgba(27,31,35,.05);
  border-radius: 3px;
  font-size: 85%;
  margin: 0;
  word-wrap: break-word;
  padding: .2em .4em;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
}
pre > code {
  background-color: transparent;
  border: 0;
  display: inline;
  line-height: inherit;
  margin: 0;
  overflow: visible;
  padding: 0;
  word-wrap: normal;
}
blockquote {
  margin-left: 30px;
  margin-top: 0px;
  margin-bottom: 16px;
  border-left-width: 3px;
  padding: 0 1em;
  color: #828282;
  border-left: 4px solid #e8e8e8;
  padding-left: 15px;
  font-size: 18px;
  letter-spacing: -1px;
  font-style: italic;
}
blockquote * {
  font-style: normal !important;
  letter-spacing: 0;
  color: #6a737d !important;
}
table {
    width: max-content;
    max-width: 100%;
  line-height: 1.5;
  border-spacing: 3px;
  display: block;
  overflow: auto;
  margin-bottom: 16px;
  border-collapse: collapse;
}
td {
  padding: 6px 13px;
  border: 1px solid #dfe2e5;
}
th {
  font-weight: 600;
  padding: 6px 13px;
  border: 1px solid #dfe2e5;
}
tr {
  background-color: #fff;
  border-top: 1px solid #c6cbd1;
}
table tr:nth-child(2n) {
  background-color: #f6f8fa;
}
img {
  max-width: 100%;
}
p {
  line-height: 24px;
  font-size: 16px;
  color: #24292e; }
ul {
  margin-top: 0; }
li {
  color: #24292e;
  font-size: 16px;
  line-height: 1.5; }
li + li {
  margin-top: 0.25em; }
a:visited {
  color: #0366d6; }
h1, h2 {
  border-bottom: 1px solid #eaecef;
  color: #111; }

/**
 * Gained from analysis in Mozilla Firefox inspector
 */
.markdown-container {
    max-width: 1214px;
    margin: auto;
    background-color: #fff;
    border: 1px solid #e1e4e8;
    border-radius: 6px;
}
.markdown-container img {
    background-color: #fff;
}
.markdown-container table img {
    background-color: transparent;
}
#readme {
    padding-top: 40px !important;
    padding-bottom: 40px !important;
    padding-left: 101px !important;
    padding-right: 101px !important;
}
img {
    border-style: none;
    box-sizing: initial;
    margin-left: 0;
    margin-right: 0;
}
img[align="left"] {
    padding-right: 20px;
}
img[align=right] {
    padding-left:20px;
}
h1, h2, h3, h4, h5, h6 {
    margin-top: 24px;
    margin-bottom: 16px;
    font-weight: 600;
    line-height: 1.25;
}
h1, h2 {
    padding-bottom: .3em;
}
h3 {
    font-size: 1.25em;
}
ol, ul {
    padding-left: 2em;
}
ol ol, ul ol {
    list-style-type: lower-roman;
}
ol ol ol, ol ul ol, ul ol ol, ul ul ol {
    list-style-type: lower-alpha;
}
li br {
    box-sizing: border-box;
    line-height: 1.5;
    margin-bottom: 6px;
}
b, strong {
    font-weight: 600;
}
</style>
</head>
<body><div class="markdown-container ltr"><div id="readme"><img src="icon/icon-readme.png" align="left">
<h1 id="xamidi-pmgenerator">@xamidi/pmGenerator</h1>
<p>Code initially extracted from <a href="https://github.com/deontic-logic/proof-tool" title="GitHub repository">deontic-logic/proof-tool</a> (still private; <a href="https://deontic-logic.github.io/readme.html">readme</a>). Can be used to generate improved versions of <a href="https://us.metamath.org/mmsolitaire/pmproofs.txt" title="us.metamath.org/mmsolitaire/pmproofs.txt">pmproofs.txt</a> of the <a href="https://us.metamath.org/mmsolitaire/mms.html" title="us.metamath.org/mmsolitaire/mms.html">mmsolitaire</a> project.<br>Exemplary generated results are available at <a href="https://github.com/xamidi/mmsolitaire" title="GitHub repository">xamidi/mmsolitaire</a>.<br>Eligible for high-performance computing. If you have access to a powerful computer, please consider to use this tool to further contribute to our knowledge regarding minimal proofs.<br>The following table exemplary shows progress that has already been made.</p>
<table>
<thead>
<tr>
<th>Files up to..</th>
<th style="text-align:center">Paths</th>
<th style="text-align:right">Size&nbsp;of&nbsp;Files&nbsp;[B]</th>
<th style="text-align:right">RAM&nbsp;[GiB]<br>(load)&nbsp;&nbsp;&nbsp;&nbsp;</th>
<th style="text-align:right">RAM&nbsp;[GiB]<br>(generate)</th>
<th style="text-align:right">Recent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>Growth&nbsp;Factor</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/xamidi/pmGenerator/tree/master/data/dProofs-withConclusions" title="735'676'962 bytes compressed into 41'959'698 bytes (ratio approx. 17.5329)">dProofs29.txt</a></td>
<td style="text-align:center"><img src="svg/markers.svg#7" alt="111"></td>
<td style="text-align:right">735 676 962</td>
<td style="text-align:right">≈      2.16</td>
<td style="text-align:right">≈      3.22</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=516720692%2F153725015" title="size(dProofs29.txt) / size(dProofs27.txt)">3.3613...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/G18AWIpC#B04xOdtQj_2PJJP0yNQxbim7pOgd-hwv1i1EVU6ZsTM" title="2'161'632'450 bytes compressed into 112'364'583 bytes (ratio approx. 19.2377)">dProofs31‑unfiltered31+.txt</a></td>
<td style="text-align:center"><img src="svg/markers.svg#4" alt="100"></td>
<td style="text-align:right">2 897 309 412</td>
<td style="text-align:right">≈      5.78</td>
<td style="text-align:right">≈    12.54</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=2161632450%2F516720692" title="size(dProofs31-unfiltered31+.txt) / size(dProofs29.txt)">4.1833...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/P1ki0IKQ#mb0QCboSu0Ofgr9nxspZTdcGUaAHPLzt-rQ8y0TN27k" title="1'741'338'664 bytes compressed into 89'327'496 bytes (ratio approx. 19.4939)">dProofs31.txt</a><sup>✻</sup></td>
<td style="text-align:center"><img src="svg/markers.svg#3" alt="011"></td>
<td style="text-align:right">2 477 015 626</td>
<td style="text-align:right">≈      5.00</td>
<td style="text-align:right">≈    12.51</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=1741338664%2F516720692" title="size(dProofs31.txt) / size(dProofs29.txt)">3.3699...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/3gVQSIJL#Qfa9CoUwsHWYYNHXYaP1mg61QQSJ1NSl1CHudK4g7BA" title="8'349'023'875 bytes compressed into 402'886'507 bytes (ratio approx. 20.7230)">dProofs33‑unfiltered31+.txt</a></td>
<td style="text-align:center"><img src="svg/markers.svg#4" alt="100"></td>
<td style="text-align:right">11 246 333 287</td>
<td style="text-align:right">≈    19.49</td>
<td style="text-align:right">≈    43.73</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=8349023875%2F2161632450" title="size(dProofs33-unfiltered31+.txt) / size(dProofs31-unfiltered31+.txt)">3.8623...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/ixshHB7S#ktigbEzeOvCvFP8pruhC0NFfeK91p__eS_uZxBtIy0w" title="7'295'621'951 bytes compressed into 352'588'174 bytes (ratio approx. 20.6916)">dProofs33‑unfiltered33+.txt</a></td>
<td style="text-align:center"><img src="svg/markers.svg#2" alt="010"></td>
<td style="text-align:right">10 192 931 363</td>
<td style="text-align:right">≈    17.04</td>
<td style="text-align:right">≈    39.42</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=7295621951%2F1741338664" title="size(dProofs33-unfiltered33+.txt) / size(dProofs31.txt)">4.1896...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/S5tDkSCC#WKEWeT7Niaj9ZVWrqiy-FGPI8ACGsd2H7mA3ZWUITFY" title="5'876'664'090 bytes compressed into 279'929'404 bytes (ratio approx. 20.9934)">dProofs33.txt</a><sup>✻</sup></td>
<td style="text-align:center"><img src="svg/markers.svg#1" alt="001"></td>
<td style="text-align:right">8 353 679 716</td>
<td style="text-align:right">≈    14.67</td>
<td style="text-align:right">≈    39.20</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=5876664090%2F1741338664" title="size(dProofs33.txt) / size(dProofs31.txt)">3.3747...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/2893yZ7S#JlCHv4uOajgBJPPE2W87F_LAPzkH0-FlF4_2OrccuC4" title="30'717'801'573 bytes compressed into 1'400'853'331 bytes (ratio approx. 21.9279)">dProofs35‑unfiltered31+.txt</a></td>
<td style="text-align:center"><img src="svg/markers.svg#4" alt="100"></td>
<td style="text-align:right">41 964 134 860</td>
<td style="text-align:right">≈    67.74</td>
<td style="text-align:right">≈  154.60</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=30717801573%2F8349023875" title="size(dProofs35-unfiltered31+.txt) / size(dProofs33-unfiltered31+.txt)">3.6792...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/WwNViKRa#UBiPOFN4wRkMgetY60eAQi1oXVQ3fQdkcg7hFxB-Dfk" title="28'223'320'428 bytes compressed into 1'290'589'236 bytes (ratio approx. 21.8686)">dProofs35‑unfiltered33+.txt</a></td>
<td style="text-align:center"><img src="svg/markers.svg#2" alt="010"></td>
<td style="text-align:right">38 416 251 791</td>
<td style="text-align:right">≈    61.41</td>
<td style="text-align:right">≈  137.87</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=28223320428%2F7295621951" title="size(dProofs35-unfiltered33+.txt) / size(dProofs33-unfiltered33+.txt)">3.8685...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/b0t1xbKI#6sjAICTTNMfQ2VO5kyVMpxVHSQNZzxWPktOEGJkberk" title="24'669'947'024 bytes compressed into 1'121'466'816 bytes (ratio approx. 21.9979)">dProofs35‑unfiltered35+.txt</a></td>
<td style="text-align:center"><img src="svg/markers.svg#1" alt="001"></td>
<td style="text-align:right">33 023 626 740</td>
<td style="text-align:right">≈    53.49</td>
<td style="text-align:right">≈  124.14</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=24669947024%2F5876664090" title="size(dProofs35-unfiltered35+.txt) / size(dProofs33.txt)">4.1979...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/6wUyDQzT#DQIJOLd5dCn-6V9sJWiJXeGRPUTUaA-7LqbGfLStjV0" title="113'174'356'461 bytes compressed into 4'897'020'927 bytes (ratio approx. 23.1109)">dProofs37‑unfiltered31+.txt</a><sup>✻</sup></td>
<td style="text-align:center"><img src="svg/markers.svg#4" alt="100"></td>
<td style="text-align:right">155 138 491 321</td>
<td style="text-align:right">≈  238.30</td>
<td style="text-align:right">≈  485.12</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=113174356461%2F30717801573" title="size(dProofs37-unfiltered31+.txt) / size(dProofs35-unfiltered31+.txt)">3.6843...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/q1txWSZA#P_HoU6_4_fCYd_1Zw7Y5UG7R4UWdlVm4_s9xG6pzsoY" title="103'965'043'304 bytes compressed into 4'479'575'346 bytes (ratio approx. 23.2087)">dProofs37‑unfiltered33+.txt</a><sup>✻</sup></td>
<td style="text-align:center"><img src="svg/markers.svg#2" alt="010"></td>
<td style="text-align:right">142 381 295 095</td>
<td style="text-align:right">≈  217.76</td>
<td style="text-align:right">≈  446.50</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=103965043304%2F28223320428" title="size(dProofs37-unfiltered33+.txt) / size(dProofs35-unfiltered33+.txt)">3.6836...</a></td>
</tr>
<tr>
<td><a href="https://mega.nz/file/Pg0STDYL#YZF0i4i6AcLP2_gZQuHNb40ajbspYC8wOFsK7fmKQTw" title="95'571'571'048 bytes compressed into 4'105'722'124 bytes (ratio approx. 23.2777)">dProofs37‑unfiltered35+.txt</a><sup>✻</sup></td>
<td style="text-align:center"><img src="svg/markers.svg#1" alt="001"></td>
<td style="text-align:right">128 595 197 788</td>
<td style="text-align:right">≈  197.08</td>
<td style="text-align:right">≈  408.38</td>
<td style="text-align:right"><a href="https://www.wolframalpha.com/input?i=95571571048%2F24669947024" title="size(dProofs37-unfiltered35+.txt) / size(dProofs35-unfiltered35+.txt)">3.8740...</a></td>
</tr>
</tbody>
</table>
<p>Measured RAM requirements correspond to the maximum resident set size according to <a href="https://slurm.schedmd.com/documentation.html">Slurm</a>, i.e. <code>MaxRSS</code> of <a href="https://slurm.schedmd.com/sacct.html">sacct</a>.<br>This tool has been <a href="https://groups.google.com/g/metamath/c/6DzIY33mthE/m/K0I6UNoiAgAJ">posted</a> to the Metamath mailing list.</p>
<h4 id="usage">Usage</h4>
<pre><code>pmGenerator ( -g &lt;limit&gt; [-u] [-c] | -r &lt;pmproofs file&gt; &lt;output file&gt; [-i &lt;prefix&gt;] [-c] [-d] | -a &lt;initials&gt; &lt;replacements file&gt; &lt;pmproofs file&gt; &lt;output file&gt; [-s] [-l] [-w] [-d] | -f ( 0 | 1 ) [-i &lt;prefix&gt;] [-o &lt;prefix&gt;] [-d] | -p [-i &lt;prefix&gt;] [-s] [-t] [-x &lt;limit&gt;] [-y &lt;limit&gt;] [-o &lt;output file&gt;] [-d] )+ | -m &lt;limit&gt; [-s]
-g: Generate proof files
    -u: unfiltered (significantly faster, but generates redundant proofs)
    -c: proof files without conclusions, requires additional parsing
-r: Replacements file creation based on proof files
    -i: customize input file path prefix ; default: "data/dProofs-withConclusions/dProofs"
    -c: proof files without conclusions, requires additional parsing ; sets default input file path prefix to "data/dProofs-withoutConclusions/dProofs"
    -d: print debug information
-a: Apply replacements file
    -s: style all proofs (replace proofs with alphanumerically smaller variants)
    -l: list all proofs (i.e. not only modified proofs)
    -w: wrap results
    -d: print debug information
-f: Create proof files with removed (-f 0) or added (-f 1) conclusions from proof files of the other variant
    -i: customize input file path prefix ; default: "data/dProofs-withConclusions/dProofs" or "data/dProofs-withoutConclusions/dProofs"
    -o: customize output file path prefix ; default: "data/dProofs-withoutConclusions/dProofs" or "data/dProofs-withConclusions/dProofs"
    -d: print debug information
-p: Print conclusion length plot data
    -i: customize input file path prefix ; requires files with conclusions ; default: "data/dProofs-withConclusions/dProofs"
    -s: measure symbolic length (in contrast to conclusion representation length)
    -t: table arrangement, one data point per row
    -x: upper horizontal limit
    -y: upper vertical limit
    -o: print to given output file
    -d: print debug information
-m: MPI-based multi-node filtering (-m &lt;n&gt;) of a first unfiltered proof file (with conclusions) at ./data/dProofs-withConclusions/dProofs&lt;n&gt;-unfiltered&lt;n&gt;+.txt. Creates dProofs&lt;n&gt;.txt.
    Cannot be combined with further commands.
    -s: disable smooth progress mode (lowers memory requirements, but makes worse progress predictions)
</code></pre><h4 id="examples">Examples</h4>
<pre><code>pmGenerator -g -1
pmGenerator -r "data/pmproofs.txt" "data/pmproofs-reducer.txt" -i "data/dProofs" -c -d
pmGenerator -a SD data/pmproofs-reducer.txt data/pmproofs.txt data/pmproofs-result-styleAll-modifiedOnly.txt -s -w -d
pmGenerator -g 19 -g 21 -u -r data/pmproofs-old.txt data/pmproofs-reducer.txt -d -a SD data/pmproofs-reducer.txt data/pmproofs-old.txt data/pmproofs-result-styleAll-modifiedOnly.txt -s -w -d
pmGenerator -f 0 -o data/dProofs-withoutConclusions_ALL/dProofs -d
pmGenerator -p -s -d -p -s -t -x 50 -y 100 -o data/plot_data_x50_y100.txt
pmGenerator -m 17 -s
</code></pre><h4 id="multi-node-computing">Multi-node Computing</h4>
<p>For MPI-based filtering, each spawned process is multithreaded and attempts to use as many threads as the hardware specifies as concurrent. Therefore, it is ideal to spawn the same amount of processes and nodes.<br>The following exemplary <a href="https://slurm.schedmd.com/documentation.html">Slurm</a> batch script has been used via <a href="https://slurm.schedmd.com/sbatch.html">sbatch</a> in order to reduce <code>dProofs31‑unfiltered31+.txt</code> to <code>dProofs31.txt</code>.</p>
<pre><code>#!/bin/zsh
#SBATCH --job-name=pmGen-20
#SBATCH --output=output_%J.txt
#SBATCH --partition=c18m
#SBATCH --account=rwth1392
#SBATCH --time=3-00:00:00
#SBATCH --mem-per-cpu=3900M
#SBATCH --cpus-per-task=48
#SBATCH --mail-user=&lt;email&gt;
#SBATCH --mail-type=END,FAIL,TIME_LIMIT
## Number of nodes to use ; Also update #processes (via srun)!
#SBATCH --nodes=6
srun -n 6 ./pmGenerator -m 31
</code></pre><p>A subsequent query with <a href="https://slurm.schedmd.com/squeue.html">squeue</a> would then reveal the following information:</p>
<pre><code>$ squeue -o "%.9i %.8j %.9P %.11a %.8u %.5C %.5D %.10T %.10M %.10l %.19S %R" -u &lt;userID&gt;
    JOBID     NAME PARTITION     ACCOUNT     USER  CPUS NODES      STATE       TIME TIME_LIMIT          START_TIME NODELIST(REASON)
 34762453 pmGen-20      c18m    rwth1392 &lt;userID&gt;   288     6    RUNNING       3:34 3-00:00:00 2023-05-04T07:52:24 ncm[0297,0306-0307,0315,0320-0321]
</code></pre><p>You may have a look at the <a href="log/dProofs31_6node_288cpu.log">log file</a> generated by that computation.</p>
<h4 id="navigation">Navigation</h4>
<ul>
<li><a href="https://github.com/xamidi/pmGenerator/tree/c++11">C++11 branch</a></li>
<li><a href="https://github.com/xamidi/pmGenerator/tree/master">C++20 branch</a></li>
</ul>
<p><sup>✻</sup><sub>Generation and utilization were performed with computing resources granted by RWTH Aachen University under project <a href="pdf/rwth1392_abstract.pdf" title="View rwth1392_abstract.pdf">rwth1392</a>.</sub></p>
</div></div></body></html>
